<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Trick Library Frontend</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .item { border: 1px solid #ddd; padding: 10px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>My Database Items</h1>
    <div id="items">Loading...</div>

    <script>
        // Fetch data from your API
        fetch('/.netlify/functions/get-items')
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                const container = document.getElementById('items');

                // Check if data has an error property
                if (data.error) {
                    container.innerHTML = `<div style="color: red;">Error: ${data.error}</div>`;
                    return;
                }

                // Check if data is an array
                if (!Array.isArray(data)) {
                    container.innerHTML = '<div style="color: red;">Error: Expected array from API</div>';
                    return;
                }

                // Display the data
                if (data.length === 0) {
                    container.innerHTML = '<div>No items found</div>';
                } else {
                    container.innerHTML = data.map(item =>
                        `<div class="item">${JSON.stringify(item)}</div>`
                    ).join('');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('items').innerHTML =
                    `<div style="color: red;">Error loading data: ${error.message}</div>`;
            });
    </script>
</body>
</html>