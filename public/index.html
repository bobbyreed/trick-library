<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Trick Library Frontend</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .item { border: 1px solid #ddd; padding: 10px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Trick Library Tables</h1>
    <div class="nav">
        <a href="#"><button>Login</button></a>
        <a href="./pages/tableViews.html"><button>Table View</button></a>
        <a href="#"><button>Custom Views</button></a>
        <a href="#"><button>Query Creator</button></a>
    </div>
    <h2>Tricks</h2>
    
    <div id="tricks">Loading...</div>

    <script>
        // Fetch data from your API
        fetch('/.netlify/functions/get-tricks')
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                const container = document.getElementById('tricks');

                // Check if data has an error property
                if (data.error) {
                    container.innerHTML = `<div style="color: red;">Error: ${data.error}</div>`;
                    return;
                }

                // Check if data is an array
                if (!Array.isArray(data)) {
                    container.innerHTML = '<div style="color: red;">Error: Expected array from API</div>';
                    return;
                }

                // Display the data
                if (data.length === 0) {
                    container.innerHTML = '<div>No items found</div>';
                } else {
                    container.innerHTML = data.map(item =>
                        `<div class="item">${JSON.stringify(item)}</div>`
                    ).join('');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('items').innerHTML =
                    `<div style="color: red;">Error loading data: ${error.message}</div>`;
            });
    </script>
    <h2>Locations</h2>
    <div id="locations">Loading...</div>

    <script>
        // Fetch data from your API
        fetch('/.netlify/functions/get-locations')
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                const container = document.getElementById('locations');

                // Check if data has an error property
                if (data.error) {
                    container.innerHTML = `<div style="color: red;">Error: ${data.error}</div>`;
                    return;
                }

                // Check if data is an array
                if (!Array.isArray(data)) {
                    container.innerHTML = '<div style="color: red;">Error: Expected array from API</div>';
                    return;
                }

                // Display the data
                if (data.length === 0) {
                    container.innerHTML = '<div>No items found</div>';
                } else {
                    container.innerHTML = data.map(item =>
                        `<div class="item">${JSON.stringify(item)}</div>`
                    ).join('');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('items').innerHTML =
                    `<div style="color: red;">Error loading data: ${error.message}</div>`;
            });
    </script>
    
    <h2>Skaters</h2>
    <div id="skaters">Loading...</div>

    <script>
        // Fetch data from your API
        fetch('/.netlify/functions/get-skaters')
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                const container = document.getElementById('skaters');

                // Check if data has an error property
                if (data.error) {
                    container.innerHTML = `<div style="color: red;">Error: ${data.error}</div>`;
                    return;
                }

                // Check if data is an array
                if (!Array.isArray(data)) {
                    container.innerHTML = '<div style="color: red;">Error: Expected array from API</div>';
                    return;
                }

                // Display the data
                if (data.length === 0) {
                    container.innerHTML = '<div>No items found</div>';
                } else {
                    container.innerHTML = data.map(item =>
                        `<div class="item">${JSON.stringify(item)}</div>`
                    ).join('');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('items').innerHTML =
                    `<div style="color: red;">Error loading data: ${error.message}</div>`;
            });
    </script>
            </body>
            </html>