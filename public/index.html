<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Trick Library Frontend</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .item { border: 1px solid #ddd; padding: 10px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Trick Library Tables</h1>
    <div class="nav">
        <a href="#"><button>Login</button></a>
        <a href="#"><button>Table View</button></a>
        <a href="#"><button>Custom Views</button></a>
        <a href="#"><button>Query Creator</button></a>
    </div>
    <h2>Tricks</h2>
    
    <div id="tricks">Loading...</div>

    <script>
        // Fetch data from your API
        fetch('/.netlify/functions/get-tricks')
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                const container = document.getElementById('tricks');

                // Check if data has an error property
                if (data.error) {
                    container.innerHTML = `<div style="color: red;">Error: ${data.error}</div>`;
                    return;
                }

                // Check if data is an array
                if (!Array.isArray(data)) {
                    container.innerHTML = '<div style="color: red;">Error: Expected array from API</div>';
                    return;
                }

                // Display the data
                if (data.length === 0) {
                    container.innerHTML = '<div>No items found</div>';
                } else {
                    container.innerHTML = data.map(item =>
                        `<div class="item">${JSON.stringify(item)}</div>`
                    ).join('');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('items').innerHTML =
                    `<div style="color: red;">Error loading data: ${error.message}</div>`;
            });
    </script>
    <h2>Locations</h2>
    <div id="locations">Loading...</div>

    <script>
        // Fetch data from your API
        fetch('/.netlify/functions/get-locations')
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                const container = document.getElementById('locations');

                // Check if data has an error property
                if (data.error) {
                    container.innerHTML = `<div style="color: red;">Error: ${data.error}</div>`;
                    return;
                }

                // Check if data is an array
                if (!Array.isArray(data)) {
                    container.innerHTML = '<div style="color: red;">Error: Expected array from API</div>';
                    return;
                }

                // Display the data
                if (data.length === 0) {
                    container.innerHTML = '<div>No items found</div>';
                } else {
                    container.innerHTML = data.map(item =>
                        `<div class="item">${JSON.stringify(item)}</div>`
                    ).join('');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('items').innerHTML =
                    `<div style="color: red;">Error loading data: ${error.message}</div>`;
            });
    </script>
    
    <h2>Skaters</h2>
    <div id="skaters">Loading...</div>

    <script>
        // Fetch data from your API
        fetch('/.netlify/functions/get-skaters')
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                const container = document.getElementById('skaters');

                // Check if data has an error property
                if (data.error) {
                    container.innerHTML = `<div style="color: red;">Error: ${data.error}</div>`;
                    return;
                }

                // Check if data is an array
                if (!Array.isArray(data)) {
                    container.innerHTML = '<div style="color: red;">Error: Expected array from API</div>';
                    return;
                }

                // Display the data
                if (data.length === 0) {
                    container.innerHTML = '<div>No items found</div>';
                } else {
                    container.innerHTML = data.map(item =>
                        `<div class="item">${JSON.stringify(item)}</div>`
                    ).join('');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('items').innerHTML =
                    `<div style="color: red;">Error loading data: ${error.message}</div>`;
            });
    </script>

    <h2>All tables example (lecture 7 slide 8-9)</h2>
    <div id="all-tables">Loading...
        <script>// In your index.html or app.js
async function loadAllData() {
  try {
    // Fetch from your combined endpoint
    const response = await fetch('/api/get-all-data');
    const data = await response.json();

    // Display each table
    displayTable('table1-container', data.firstTable, 'First Table Name');
    displayTable('table2-container', data.secondTable, 'Second Table Name');
    displayTable('table3-container', data.thirdTable, 'Third Table Name');
  } catch (error) {
    console.error('Error loading data:', error);
  }
}

function displayTable(containerId, rows, tableName) {
  const container = document.getElementById(containerId);
  if (!rows.length) {
    container.innerHTML = `<p>No data in ${tableName}</p>`;
    return;
  }

  // Create table HTML
  const headers = Object.keys(rows[0]);
  const tableHTML = `
    <h3>${tableName}</h3>
    <table>
      <thead><tr>${headers.map(h => '<th>' + h + '</th>').join('')}</tr></thead>
      <tbody>${rows.map(row =>
        '<tr>' + headers.map(h => '<td>' + row[h] + '</td>').join('') + '</tr>'
      ).join('')}</tbody>
    </table>
  `;
  container.innerHTML = tableHTML;
}

// Load data when page loads
window.addEventListener('DOMContentLoaded', loadAllData);</script>
    </div>
</body>
</html>